RAPPORT DE MIGRATION CONCERT â†’ DATE
===================================
Date: Tue Jul  8 15:00:26 CEST 2025
Mode: DRY-RUN


ğŸ¯ PHASE 1: Collections Firebase
================================
ğŸ“ src//components/debug/TestWorkflowButton.js:243
   - AVANT:       const collections = ['concerts', 'lieux', 'contacts', 'artistes'];
   + APRÃˆS:       const collections = ['dates', 'lieux', 'contacts', 'artistes'];

ğŸ“ src//components/debug/TestWorkflowButton2.js:444
   - AVANT:       const collections = ['concerts', 'lieux', 'contacts', 'artistes'];
   + APRÃˆS:       const collections = ['dates', 'lieux', 'contacts', 'artistes'];

ğŸ“ src//components/debug/OrganizationIdDebug.js:27
   - AVANT:   const collections = ['contacts', 'lieux', 'concerts', 'structures'];
   + APRÃˆS:   const collections = ['contacts', 'lieux', 'dates', 'structures'];

ğŸ“ src//components/debug/ContactsMigrationFinal.js:100
   - AVANT:     const collections = ['concerts', 'lieux', 'contrats', 'devis'];
   + APRÃˆS:     const collections = ['dates', 'lieux', 'contrats', 'devis'];

ğŸ“ src//components/debug/FestitestContactFinder.js:41
   - AVANT:       const collections = ['contacts', 'structures', 'concerts', 'lieux', 'contrats', 'factures', 'artistes'];
   + APRÃˆS:       const collections = ['contacts', 'structures', 'dates', 'lieux', 'contrats', 'factures', 'artistes'];

ğŸ“ src//components/debug/OrganizationIdFixer.js:18
   - AVANT:     const collections = ['contacts', 'lieux', 'concerts', 'artistes', 'structures'];
   + APRÃˆS:     const collections = ['contacts', 'lieux', 'dates', 'artistes', 'structures'];

ğŸ“ src//components/debug/MigrationConcertToDate.js:27
   - AVANT:     const concertsRef = collection(db, 'concerts');
   + APRÃˆS:     const datesRef = collection(db, 'dates');

ğŸ“ src//components/debug/MigrationConcertToDate.js:146
   - AVANT:     const concertsCount = (await getDocs(collection(db, 'concerts'))).size;
   + APRÃˆS:     const datesCount = (await getDocs(collection(db, 'dates'))).size;

ğŸ“ src//components/debug/MigrationConcertToDate.js:228
   - AVANT:             <li>Cette migration transforme la collection "concerts" en "dates"</li>
   + APRÃˆS:             <li>Cette migration transforme la collection "dates" en "dates"</li>

ğŸ“ src//components/debug/MigrationConcertToDate.js:384
   - AVANT:                   <li>Une fois validÃ©, supprimez l'ancienne collection "concerts"</li>
   + APRÃˆS:                   <li>Une fois validÃ©, supprimez l'ancienne collection "dates"</li>

ğŸ“ src//components/debug/ListDebugger.js:23
   - AVANT:       const collections = ['contacts', 'lieux', 'concerts', 'structures'];
   + APRÃˆS:       const collections = ['contacts', 'lieux', 'dates', 'structures'];


ğŸ¯ PHASE 2: PropriÃ©tÃ©s d'objets
================================

ğŸ“Œ Migration: concertsAssocies â†’ datesAssociees
ğŸ“ src//components/structures/desktop/StructureForm.js:85
   - AVANT:   const [concertsAssocies, setDatesAssocies] = useState([]);
   + APRÃˆS:   const [datesAssociees, setDatesAssocies] = useState([]);

ğŸ“ src//components/structures/desktop/StructureForm.js:458
   - AVANT:         concertsIds: concertsAssocies.map(c => c.id),
   + APRÃˆS:         concertsIds: datesAssociees.map(c => c.id),

ğŸ“ src//components/structures/desktop/StructureForm.js:725
   - AVANT:               dateIds={concertsAssocies.map(c => c.id)}
   + APRÃˆS:               dateIds={datesAssociees.map(c => c.id)}

ğŸ“ src//components/structures/desktop/StructureForm.js:732
   - AVANT:                   const currentIds = concertsAssocies.map(c => c.id);
   + APRÃˆS:                   const currentIds = datesAssociees.map(c => c.id);

ğŸ“ src//components/contacts/sections/ContactDatesSection.js:15
   - AVANT:   concertsAssocies,
   + APRÃˆS:   datesAssociees,

ğŸ“ src//components/contacts/sections/ContactDatesSection.js:24
   - AVANT:       title={`Dates associÃ©s (${concertsAssocies.length})`}
   + APRÃˆS:       title={`Dates associÃ©s (${datesAssociees.length})`}

ğŸ“ src//components/contacts/sections/ContactDatesSection.js:83
   - AVANT:         ) : concertsAssocies.length > 0 ? (
   + APRÃˆS:         ) : datesAssociees.length > 0 ? (

ğŸ“ src//components/contacts/sections/ContactDatesSection.js:96
   - AVANT:                 {concertsAssocies.map((concert) => (
   + APRÃˆS:                 {datesAssociees.map((concert) => (

ğŸ“ src//components/contacts/mobile/ContactView.js:185
   - AVANT:         {contact.concertsAssocies && contact.concertsAssocies.length > 0 ? (
   + APRÃˆS:         {contact.datesAssociees && contact.datesAssociees.length > 0 ? (

ğŸ“ src//components/contacts/mobile/ContactView.js:187
   - AVANT:             {contact.concertsAssocies.slice(0, 3).map(concert => (
   + APRÃˆS:             {contact.datesAssociees.slice(0, 3).map(concert => (

ğŸ“ src//components/contacts/mobile/ContactView.js:206
   - AVANT:             {contact.concertsAssocies.length > 3 && (
   + APRÃˆS:             {contact.datesAssociees.length > 3 && (

ğŸ“ src//components/contacts/mobile/ContactView.js:211
   - AVANT:                 Voir tous les concerts ({contact.concertsAssocies.length})
   + APRÃˆS:                 Voir tous les concerts ({contact.datesAssociees.length})

ğŸ“ src//components/contacts/mobile/ContactView.js:228
   - AVANT:         <HistoriqueEchanges contactId={id} concerts={contact.concertsAssocies || []} />
   + APRÃˆS:         <HistoriqueEchanges contactId={id} concerts={contact.datesAssociees || []} />

ğŸ“ src//components/artistes/desktop/ArtisteView.js:35
   - AVANT:           artisteData.concertsAssocies = concertsSnapshot.docs.map(doc => ({
   + APRÃˆS:           artisteData.datesAssociees = concertsSnapshot.docs.map(doc => ({

ğŸ“ src//components/artistes/desktop/ArtisteView.js:145
   - AVANT:                       <span>{artiste.concertsAssocies?.length || 0} concerts</span>
   + APRÃˆS:                       <span>{artiste.datesAssociees?.length || 0} concerts</span>

ğŸ“ src//components/artistes/desktop/ArtisteView.js:345
   - AVANT:             title={`Dates associÃ©s (${artiste.concertsAssocies?.length || 0})`}
   + APRÃˆS:             title={`Dates associÃ©s (${artiste.datesAssociees?.length || 0})`}

ğŸ“ src//components/artistes/desktop/ArtisteView.js:359
   - AVANT:             {artiste.concertsAssocies && artiste.concertsAssocies.length > 0 ? (
   + APRÃˆS:             {artiste.datesAssociees && artiste.datesAssociees.length > 0 ? (

ğŸ“ src//components/artistes/desktop/ArtisteView.js:361
   - AVANT:                 {artiste.concertsAssocies.map((concert, index) => (
   + APRÃˆS:                 {artiste.datesAssociees.map((concert, index) => (

ğŸ“ src//components/artistes/desktop/ArtisteView.js:434
   - AVANT:                         {artiste.concertsAssocies?.find(c => c.id === contrat.dateId)?.lieu || 'Date inconnu'}
   + APRÃˆS:                         {artiste.datesAssociees?.find(c => c.id === contrat.dateId)?.lieu || 'Date inconnu'}

ğŸ“ src//components/artistes/desktop/ArtisteView.js:478
   - AVANT:                   {artiste.concertsAssocies?.length || 0}
   + APRÃˆS:                   {artiste.datesAssociees?.length || 0}

ğŸ“ src//components/artistes/mobile/ArtisteView.js:34
   - AVANT:           artisteData.concertsAssocies = concertsSnapshot.docs.map(doc => ({
   + APRÃˆS:           artisteData.datesAssociees = concertsSnapshot.docs.map(doc => ({

ğŸ“ src//components/artistes/mobile/ArtisteView.js:103
   - AVANT:               <span>{artiste.concertsAssocies?.length || 0} concerts</span>
   + APRÃˆS:               <span>{artiste.datesAssociees?.length || 0} concerts</span>

ğŸ“ src//components/artistes/mobile/ArtisteView.js:209
   - AVANT:             {(!artiste.concertsAssocies || artiste.concertsAssocies.length === 0) ? (
   + APRÃˆS:             {(!artiste.datesAssociees || artiste.datesAssociees.length === 0) ? (

ğŸ“ src//components/artistes/mobile/ArtisteView.js:224
   - AVANT:                   <h3>Dates ({artiste.concertsAssocies.length})</h3>
   + APRÃˆS:                   <h3>Dates ({artiste.datesAssociees.length})</h3>

ğŸ“ src//components/artistes/mobile/ArtisteView.js:234
   - AVANT:                   {artiste.concertsAssocies.map(concert => (
   + APRÃˆS:                   {artiste.datesAssociees.map(concert => (

ğŸ“ src//components/artistes/mobile/ArtisteView.js:285
   - AVANT:                           {artiste.concertsAssocies?.find(c => c.id === contrat.dateId)?.lieu || 'Date inconnu'}
   + APRÃˆS:                           {artiste.datesAssociees?.find(c => c.id === contrat.dateId)?.lieu || 'Date inconnu'}

ğŸ“ src//components/debug/MigrationConcertToDate.js:77
   - AVANT:         fields: ['concertsIds', 'concertsAssocies'],
   + APRÃˆS:         fields: ['concertsIds', 'datesAssociees'],

ğŸ“ src//components/debug/MigrationConcertToDate.js:82
   - AVANT:         fields: ['concertsIds', 'concertsAssocies'],
   + APRÃˆS:         fields: ['concertsIds', 'datesAssociees'],

ğŸ“ src//components/debug/DataStructureFixer.js:114
   - AVANT:                 concertsAssocies: data.concertsAssocies || [],
   + APRÃˆS:                 datesAssociees: data.datesAssociees || [],

ğŸ“ src//hooks/generics/actions/useGenericAction.js:164
   - AVANT:           concertsAssocies: entityData.concertsAssocies || [],
   + APRÃˆS:           datesAssociees: entityData.datesAssociees || [],

ğŸ“ src//hooks/generics/actions/useGenericAction.js:294
   - AVANT:           concertsAssocies: updateData.concertsAssocies || [],
   + APRÃˆS:           datesAssociees: updateData.datesAssociees || [],

ğŸ“ src//hooks/contacts/useSimpleContactDetails.js:112
   - AVANT:       // MÃ©thode 1: VÃ©rifier si le contact a des concertsIds ou concertsAssocies dans ses donnÃ©es
   + APRÃˆS:       // MÃ©thode 1: VÃ©rifier si le contact a des concertsIds ou datesAssociees dans ses donnÃ©es

ğŸ“ src//hooks/contacts/useSimpleContactDetails.js:113
   - AVANT:       if (contactEntity.concertsIds?.length > 0 || contactEntity.concertsAssocies?.length > 0) {
   + APRÃˆS:       if (contactEntity.concertsIds?.length > 0 || contactEntity.datesAssociees?.length > 0) {

ğŸ“ src//hooks/contacts/useSimpleContactDetails.js:114
   - AVANT:         const concertRefs = contactEntity.concertsIds || contactEntity.concertsAssocies || [];
   + APRÃˆS:         const concertRefs = contactEntity.concertsIds || contactEntity.datesAssociees || [];

ğŸ“ src//hooks/lieux/useLieuxQuery.js:150
   - AVANT:           if (lieu.concertsAssocies && lieu.concertsAssocies.length > 0) {
   + APRÃˆS:           if (lieu.datesAssociees && lieu.datesAssociees.length > 0) {

ğŸ“ src//hooks/common/useFormSubmission.js:175
   - AVANT:           concertsAssocies: processedData.concertsAssocies || [],
   + APRÃˆS:           datesAssociees: processedData.datesAssociees || [],

ğŸ“ src//hooks/artistes/useSearchAndFilter.js:29
   - AVANT:  *     avecDates: (artiste) => artiste.concertsAssocies?.length > 0,
   + APRÃˆS:  *     avecDates: (artiste) => artiste.datesAssociees?.length > 0,

ğŸ“ src//hooks/artistes/useSearchAndFilter.js:30
   - AVANT:  *     sansDates: (artiste) => !artiste.concertsAssocies || artiste.concertsAssocies.length === 0
   + APRÃˆS:  *     sansDates: (artiste) => !artiste.datesAssociees || artiste.datesAssociees.length === 0

ğŸ“ src//hooks/artistes/useSearchAndFilter.js:53
   - AVANT:       avecDates: (artiste) => artiste.concertsAssocies?.length > 0,
   + APRÃˆS:       avecDates: (artiste) => artiste.datesAssociees?.length > 0,

ğŸ“ src//hooks/artistes/useSearchAndFilter.js:54
   - AVANT:       sansDates: (artiste) => !artiste.concertsAssocies || artiste.concertsAssocies.length === 0
   + APRÃˆS:       sansDates: (artiste) => !artiste.datesAssociees || artiste.datesAssociees.length === 0


ğŸ“Œ Migration: concertsIds â†’ datesIds
ğŸ“ src//components/structures/desktop/StructureForm.js:150
   - AVANT:       if (structure.concertsIds?.length > 0) {
   + APRÃˆS:       if (structure.datesIds?.length > 0) {

ğŸ“ src//components/structures/desktop/StructureForm.js:151
   - AVANT:         const concertPromises = structure.concertsIds.map(async (id) => {
   + APRÃˆS:         const concertPromises = structure.datesIds.map(async (id) => {

ğŸ“ src//components/structures/desktop/StructureForm.js:458
   - AVANT:         concertsIds: concertsAssocies.map(c => c.id),
   + APRÃˆS:         datesIds: concertsAssocies.map(c => c.id),

ğŸ“ src//components/debug/ContactMigrationTool.js:161
   - AVANT:         if (contactData.concertsIds && contactData.concertsIds.length > 0) {
   + APRÃˆS:         if (contactData.datesIds && contactData.datesIds.length > 0) {

ğŸ“ src//components/debug/ContactMigrationTool.js:162
   - AVANT:           addLog(`ğŸµ Recherche de ${contactData.concertsIds.length} concert(s)...`);
   + APRÃˆS:           addLog(`ğŸµ Recherche de ${contactData.datesIds.length} concert(s)...`);

ğŸ“ src//components/debug/ContactMigrationTool.js:163
   - AVANT:           for (const dateId of contactData.concertsIds) {
   + APRÃˆS:           for (const dateId of contactData.datesIds) {

ğŸ“ src//components/debug/ContactCreationTester.js:63
   - AVANT:         concertsIds: [],
   + APRÃˆS:         datesIds: [],

ğŸ“ src//components/debug/ContactCreationTester.js:112
   - AVANT:         concertsIds: [],
   + APRÃˆS:         datesIds: [],

ğŸ“ src//components/debug/ContactCreationTester.js:166
   - AVANT:         concertsIds: [],
   + APRÃˆS:         datesIds: [],

ğŸ“ src//components/debug/ContactCreationTester.js:222
   - AVANT:         concertsIds: [],
   + APRÃˆS:         datesIds: [],

ğŸ“ src//components/debug/ContactCreationTester.js:284
   - AVANT:           contactFinal.concertsIds?.includes(dateId) &&
   + APRÃˆS:           contactFinal.datesIds?.includes(dateId) &&

ğŸ“ src//components/debug/ContactCreationTester.js:320
   - AVANT:             `${data.nom} - Lieux: ${data.lieuxIds?.length || 0}, Dates: ${data.concertsIds?.length || 0}, Structure: ${data.structureNom || 'Aucune'}`);
   + APRÃˆS:             `${data.nom} - Lieux: ${data.lieuxIds?.length || 0}, Dates: ${data.datesIds?.length || 0}, Structure: ${data.structureNom || 'Aucune'}`);

ğŸ“ src//components/debug/ContactCreationTester.js:372
   - AVANT:       const concertsIds = contactData.concertsIds || [];
   + APRÃˆS:       const datesIds = contactData.datesIds || [];

ğŸ“ src//components/debug/ContactCreationTester.js:374
   - AVANT:       if (!concertsIds.includes(sourceId)) {
   + APRÃˆS:       if (!datesIds.includes(sourceId)) {

ğŸ“ src//components/debug/ContactCreationTester.js:377
   - AVANT:             concertsIds: [...concertsIds, sourceId],
   + APRÃˆS:             datesIds: [...datesIds, sourceId],

ğŸ“ src//components/debug/ContactCreationTester.js:426
   - AVANT:         if (dateData.contactIds?.includes(contactId) && contactData.concertsIds?.includes(entityId)) {
   + APRÃˆS:         if (dateData.contactIds?.includes(contactId) && contactData.datesIds?.includes(entityId)) {

ğŸ“ src//components/debug/SophieMadetMigration.js:42
   - AVANT:     concertsIds: ["con-1749569483128-xw9cfj"]
   + APRÃˆS:     datesIds: ["con-1749569483128-xw9cfj"]

ğŸ“ src//components/debug/SophieMadetMigration.js:196
   - AVANT:           concertsIds: completeData.concertsIds || [],
   + APRÃˆS:           datesIds: completeData.datesIds || [],

ğŸ“ src//components/debug/BidirectionalRelationsFixer.js:43
   - AVANT:           la liste concertsIds de cet artiste.
   + APRÃˆS:           la liste datesIds de cet artiste.

ğŸ“ src//components/debug/EntityCreationTester.js:70
   - AVANT:         concertsIds: [],
   + APRÃˆS:         datesIds: [],

ğŸ“ src//components/debug/EntityCreationTester.js:111
   - AVANT:         concertsIds: [],
   + APRÃˆS:         datesIds: [],

ğŸ“ src//components/debug/EntityCreationTester.js:157
   - AVANT:         concertsIds: [],
   + APRÃˆS:         datesIds: [],

ğŸ“ src//components/debug/EntityCreationTester.js:201
   - AVANT:         concertsIds: [],
   + APRÃˆS:         datesIds: [],

ğŸ“ src//components/debug/EntityCreationTester.js:214
   - AVANT:         concertsIds: [],
   + APRÃˆS:         datesIds: [],

ğŸ“ src//components/debug/EntityCreationTester.js:275
   - AVANT:         concertsIds: [],
   + APRÃˆS:         datesIds: [],

ğŸ“ src//components/debug/EntityCreationTester.js:341
   - AVANT:         concertsIds: [],
   + APRÃˆS:         datesIds: [],

ğŸ“ src//components/debug/EntityCreationTester.js:370
   - AVANT:         concertsIds: [dateId],
   + APRÃˆS:         datesIds: [dateId],

ğŸ“ src//components/debug/EntityCreationTester.js:374
   - AVANT:         concertsIds: [dateId],
   + APRÃˆS:         datesIds: [dateId],

ğŸ“ src//components/debug/EntityCreationTester.js:428
   - AVANT:       const concertsIds = contactData.concertsIds || [];
   + APRÃˆS:       const datesIds = contactData.datesIds || [];

ğŸ“ src//components/debug/EntityCreationTester.js:430
   - AVANT:       if (!concertsIds.includes(sourceId)) {
   + APRÃˆS:       if (!datesIds.includes(sourceId)) {

ğŸ“ src//components/debug/EntityCreationTester.js:433
   - AVANT:             concertsIds: [...concertsIds, sourceId],
   + APRÃˆS:             datesIds: [...datesIds, sourceId],

ğŸ“ src//components/debug/EntityCreationTester.js:444
   - AVANT:       const concertsIds = lieuData.concertsIds || [];
   + APRÃˆS:       const datesIds = lieuData.datesIds || [];

ğŸ“ src//components/debug/EntityCreationTester.js:446
   - AVANT:       if (!concertsIds.includes(sourceId)) {
   + APRÃˆS:       if (!datesIds.includes(sourceId)) {

ğŸ“ src//components/debug/EntityCreationTester.js:449
   - AVANT:             concertsIds: [...concertsIds, sourceId],
   + APRÃˆS:             datesIds: [...datesIds, sourceId],

ğŸ“ src//components/debug/EntityCreationTester.js:481
   - AVANT:         if (dateData.contactId === targetId && contactData.concertsIds?.includes(entityId)) {
   + APRÃˆS:         if (dateData.contactId === targetId && contactData.datesIds?.includes(entityId)) {

ğŸ“ src//components/debug/EntityCreationTester.js:494
   - AVANT:         if (dateData.lieuIds?.includes(targetId) && lieuData.concertsIds?.includes(entityId)) {
   + APRÃˆS:         if (dateData.lieuIds?.includes(targetId) && lieuData.datesIds?.includes(entityId)) {

ğŸ“ src//components/debug/EntityRelationsDebugger.js:82
   - AVANT:     // 1. Dates liÃ©s via concertsIds
   + APRÃˆS:     // 1. Dates liÃ©s via datesIds

ğŸ“ src//components/debug/EntityRelationsDebugger.js:83
   - AVANT:     if (artiste.concertsIds && artiste.concertsIds.length > 0) {
   + APRÃˆS:     if (artiste.datesIds && artiste.datesIds.length > 0) {

ğŸ“ src//components/debug/EntityRelationsDebugger.js:84
   - AVANT:       console.log(`ğŸ“‹ L'artiste a ${artiste.concertsIds.length} concerts dans concertsIds`);
   + APRÃˆS:       console.log(`ğŸ“‹ L'artiste a ${artiste.datesIds.length} concerts dans datesIds`);

ğŸ“ src//components/debug/EntityRelationsDebugger.js:87
   - AVANT:       for (const dateId of artiste.concertsIds) {
   + APRÃˆS:       for (const dateId of artiste.datesIds) {

ğŸ“ src//components/debug/EntityRelationsDebugger.js:105
   - AVANT:             message: `Date ${dateId} dans concertsIds n'existe pas`
   + APRÃˆS:             message: `Date ${dateId} dans datesIds n'existe pas`

ğŸ“ src//components/debug/EntityRelationsDebugger.js:122
   - AVANT:       const isInArtisteDatesIds = artiste.concertsIds?.includes(doc.id);
   + APRÃˆS:       const isInArtisteDatesIds = artiste.datesIds?.includes(doc.id);

ğŸ“ src//components/debug/EntityRelationsDebugger.js:133
   - AVANT:           message: `Date ${doc.id} (${dateData.titre}) pointe vers l'artiste mais n'est pas dans concertsIds`,
   + APRÃˆS:           message: `Date ${doc.id} (${dateData.titre}) pointe vers l'artiste mais n'est pas dans datesIds`,

ğŸ“ src//components/debug/EntityRelationsDebugger.js:138
   - AVANT:             field: 'concertsIds',
   + APRÃˆS:             field: 'datesIds',

ğŸ“ src//components/debug/EntityRelationsDebugger.js:155
   - AVANT:         const hasDateInList = artisteData.concertsIds?.includes(results.entity.id);
   + APRÃˆS:         const hasDateInList = artisteData.datesIds?.includes(results.entity.id);

ğŸ“ src//components/debug/EntityRelationsDebugger.js:167
   - AVANT:             message: `L'artiste ${artisteData.nom} n'a pas ce date dans sa liste concertsIds`,
   + APRÃˆS:             message: `L'artiste ${artisteData.nom} n'a pas ce date dans sa liste datesIds`,

ğŸ“ src//components/debug/EntityRelationsDebugger.js:172
   - AVANT:               field: 'concertsIds',
   + APRÃˆS:               field: 'datesIds',

ğŸ“ src//components/debug/EntityRelationsDebugger.js:194
   - AVANT:         const hasDateInList = lieuData.concertsIds?.includes(results.entity.id);
   + APRÃˆS:         const hasDateInList = lieuData.datesIds?.includes(results.entity.id);

ğŸ“ src//components/debug/EntityRelationsDebugger.js:206
   - AVANT:             message: `Le lieu ${lieuData.nom} n'a pas ce date dans sa liste concertsIds`,
   + APRÃˆS:             message: `Le lieu ${lieuData.nom} n'a pas ce date dans sa liste datesIds`,

ğŸ“ src//components/debug/EntityRelationsDebugger.js:211
   - AVANT:               field: 'concertsIds',
   + APRÃˆS:               field: 'datesIds',

ğŸ“ src//components/debug/EntityRelationsDebugger.js:225
   - AVANT:     if (lieu.concertsIds && lieu.concertsIds.length > 0) {
   + APRÃˆS:     if (lieu.datesIds && lieu.datesIds.length > 0) {

ğŸ“ src//components/debug/EntityRelationsDebugger.js:227
   - AVANT:       for (const dateId of lieu.concertsIds) {
   + APRÃˆS:       for (const dateId of lieu.datesIds) {

ğŸ“ src//components/debug/EntityRelationsDebugger.js:247
   - AVANT:     if (contact.concertsIds && contact.concertsIds.length > 0) {
   + APRÃˆS:     if (contact.datesIds && contact.datesIds.length > 0) {

ğŸ“ src//components/debug/EntityRelationsDebugger.js:249
   - AVANT:       for (const dateId of contact.concertsIds) {
   + APRÃˆS:       for (const dateId of contact.datesIds) {

ğŸ“ src//components/debug/EntityRelationsDebugger.js:373
   - AVANT:                                   {entity.isInArtisteDatesIds ? ' âœ… PrÃ©sent dans concertsIds' : ' âŒ Manquant dans concertsIds'}
   + APRÃˆS:                                   {entity.isInArtisteDatesIds ? ' âœ… PrÃ©sent dans datesIds' : ' âŒ Manquant dans datesIds'}

ğŸ“ src//components/debug/MigrationConcertToDate.js:77
   - AVANT:         fields: ['concertsIds', 'concertsAssocies'],
   + APRÃˆS:         fields: ['datesIds', 'concertsAssocies'],

ğŸ“ src//components/debug/MigrationConcertToDate.js:82
   - AVANT:         fields: ['concertsIds', 'concertsAssocies'],
   + APRÃˆS:         fields: ['datesIds', 'concertsAssocies'],

ğŸ“ src//components/debug/MigrationConcertToDate.js:87
   - AVANT:         fields: ['concertsIds'],
   + APRÃˆS:         fields: ['datesIds'],

ğŸ“ src//components/debug/MigrationConcertToDate.js:92
   - AVANT:         fields: ['concertsIds'],
   + APRÃˆS:         fields: ['datesIds'],

ğŸ“ src//hooks/generics/actions/useGenericAction.js:163
   - AVANT:           concertsIds: entityData.concertsIds || [],
   + APRÃˆS:           datesIds: entityData.datesIds || [],

ğŸ“ src//hooks/generics/actions/useGenericAction.js:293
   - AVANT:           concertsIds: updateData.concertsIds || [],
   + APRÃˆS:           datesIds: updateData.datesIds || [],

ğŸ“ src//hooks/contacts/useSimpleContactDetails.js:112
   - AVANT:       // MÃ©thode 1: VÃ©rifier si le contact a des concertsIds ou concertsAssocies dans ses donnÃ©es
   + APRÃˆS:       // MÃ©thode 1: VÃ©rifier si le contact a des datesIds ou concertsAssocies dans ses donnÃ©es

ğŸ“ src//hooks/contacts/useSimpleContactDetails.js:113
   - AVANT:       if (contactEntity.concertsIds?.length > 0 || contactEntity.concertsAssocies?.length > 0) {
   + APRÃˆS:       if (contactEntity.datesIds?.length > 0 || contactEntity.concertsAssocies?.length > 0) {

ğŸ“ src//hooks/contacts/useSimpleContactDetails.js:114
   - AVANT:         const concertRefs = contactEntity.concertsIds || contactEntity.concertsAssocies || [];
   + APRÃˆS:         const concertRefs = contactEntity.datesIds || contactEntity.concertsAssocies || [];

ğŸ“ src//hooks/common/useEntitySearch.js:342
   - AVANT:             concertsIds: [],
   + APRÃˆS:             datesIds: [],

ğŸ“ src//hooks/common/useEntitySearch.js:398
   - AVANT:             concertsIds: [],
   + APRÃˆS:             datesIds: [],


ğŸ¯ PHASE 3: Variables dans les boucles
=====================================

ğŸ“Œ Migration: .map((concert â†’ .map((date
ğŸ“ src//components/contacts/sections/ContactDatesSection.js:53
   - AVANT:               {filteredDateResults.map((concert) => (
   + APRÃˆS:               {filteredDateResults.map((concert) => (

ğŸ“ src//components/contacts/sections/ContactDatesSection.js:96
   - AVANT:                 {concertsAssocies.map((concert) => (
   + APRÃˆS:                 {concertsAssocies.map((concert) => (

ğŸ“ src//components/contacts/mobile/ContactView.js:187
   - AVANT:             {contact.concertsAssocies.slice(0, 3).map(concert => (
   + APRÃˆS:             {contact.concertsAssocies.slice(0, 3).map(concert => (

ğŸ“ src//components/contacts/EchangeForm.js:157
   - AVANT:             concerts.map(concert => {
   + APRÃˆS:             concerts.map(concert => {

ğŸ“ src//components/lieux/mobile/LieuView.js:230
   - AVANT:             {lieu.concerts.map(concert => (
   + APRÃˆS:             {lieu.concerts.map(concert => (

ğŸ“ src//components/artistes/desktop/ArtisteView.js:361
   - AVANT:                 {artiste.concertsAssocies.map((concert, index) => (
   + APRÃˆS:                 {artiste.concertsAssocies.map((concert, index) => (

ğŸ“ src//components/artistes/mobile/ArtisteView.js:234
   - AVANT:                   {artiste.concertsAssocies.map(concert => (
   + APRÃˆS:                   {artiste.concertsAssocies.map(concert => (

ğŸ“ src//hooks/contacts/useSimpleContactDetails.js:116
   - AVANT:         const concertPromises = concertRefs.map(concertRef => {
   + APRÃˆS:         const concertPromises = concertRefs.map(concertRef => {


ğŸ¯ PHASE 4: DÃ©clarations de variables
====================================
ğŸ“ src//components/structures/desktop/StructureForm.js:151
   - AVANT:         const concertPromises = structure.concertsIds.map(async (id) => {
   + APRÃˆS:         const concertPromises = structure.concertsIds.map(async (id) => {

ğŸ“ src//components/structures/desktop/StructureForm.js:155
   - AVANT:         const concerts = (await Promise.all(concertPromises)).filter(c => c !== null);
   + APRÃˆS:         const concerts = (await Promise.all(concertPromises)).filter(c => c !== null);

ğŸ“ src//components/structures/desktop/StructureView.js:37
   - AVANT:   const concerts = relatedData?.concerts || [];
   + APRÃˆS:   const concerts = relatedData?.concerts || [];

ğŸ“ src//components/structures/desktop/StructureView.js:42
   - AVANT:   const concertsList = concerts || [];
   + APRÃˆS:   const concertsList = concerts || [];

ğŸ“ src//components/lieux/desktop/LieuView.js:38
   - AVANT:   const concerts = relatedData?.concerts || [];
   + APRÃˆS:   const concerts = relatedData?.concerts || [];

ğŸ“ src//components/lieux/desktop/LieuView.js:43
   - AVANT:   const concertsArray = concerts || [];
   + APRÃˆS:   const concertsArray = concerts || [];

ğŸ“ src//components/artistes/desktop/ArtisteView.js:31
   - AVANT:           const concertsRef = collection(db, 'dates');
   + APRÃˆS:           const concertsRef = collection(db, 'dates');

ğŸ“ src//components/artistes/desktop/ArtisteView.js:33
   - AVANT:           const concertsSnapshot = await getDocs(q);
   + APRÃˆS:           const concertsSnapshot = await getDocs(q);

ğŸ“ src//components/artistes/mobile/ArtisteView.js:30
   - AVANT:           const concertsRef = collection(db, 'dates');
   + APRÃˆS:           const concertsRef = collection(db, 'dates');

ğŸ“ src//components/artistes/mobile/ArtisteView.js:32
   - AVANT:           const concertsSnapshot = await getDocs(q);
   + APRÃˆS:           const concertsSnapshot = await getDocs(q);

ğŸ“ src//components/debug/TestWorkflowButton.js:140
   - AVANT:       const concertRef = await addDoc(collection(db, 'dates'), dateData);
   + APRÃˆS:       const concertRef = await addDoc(collection(db, 'dates'), dateData);

ğŸ“ src//components/debug/TestWorkflowButton2.js:152
   - AVANT:       const concertRef = await addDoc(collection(db, 'dates'), dateData);
   + APRÃˆS:       const concertRef = await addDoc(collection(db, 'dates'), dateData);

ğŸ“ src//components/debug/TestWorkflowButton2.js:302
   - AVANT:       const concertRef = await addDoc(collection(db, 'dates'), dateData);
   + APRÃˆS:       const concertRef = await addDoc(collection(db, 'dates'), dateData);

ğŸ“ src//components/debug/ContactCreationTester.js:372
   - AVANT:       const concertsIds = contactData.concertsIds || [];
   + APRÃˆS:       const concertsIds = contactData.concertsIds || [];

ğŸ“ src//components/debug/EntityCreationTester.js:428
   - AVANT:       const concertsIds = contactData.concertsIds || [];
   + APRÃˆS:       const concertsIds = contactData.concertsIds || [];

ğŸ“ src//components/debug/EntityCreationTester.js:444
   - AVANT:       const concertsIds = lieuData.concertsIds || [];
   + APRÃˆS:       const concertsIds = lieuData.concertsIds || [];

ğŸ“ src//components/debug/EntityRelationsDebugger.js:113
   - AVANT:     const concertsQuery = query(
   + APRÃˆS:     const concertsQuery = query(

ğŸ“ src//components/debug/EntityRelationsDebugger.js:117
   - AVANT:     const concertsSnapshot = await getDocs(concertsQuery);
   + APRÃˆS:     const concertsSnapshot = await getDocs(concertsQuery);

ğŸ“ src//components/debug/MigrationConcertToDate.js:27
   - AVANT:     const concertsRef = collection(db, 'concerts');
   + APRÃˆS:     const concertsRef = collection(db, 'concerts');

ğŸ“ src//components/debug/MigrationConcertToDate.js:146
   - AVANT:     const concertsCount = (await getDocs(collection(db, 'concerts'))).size;
   + APRÃˆS:     const concertsCount = (await getDocs(collection(db, 'concerts'))).size;

ğŸ“ src//hooks/generics/status/useGenericEntityStatus.js:36
   - AVANT:  * const concertStatusConfig = {
   + APRÃˆS:  * const concertStatusConfig = {

ğŸ“ src//hooks/contacts/useSimpleContactDetails.js:114
   - AVANT:         const concertRefs = contactEntity.concertsIds || contactEntity.concertsAssocies || [];
   + APRÃˆS:         const concertRefs = contactEntity.concertsIds || contactEntity.concertsAssocies || [];

ğŸ“ src//hooks/contacts/useSimpleContactDetails.js:116
   - AVANT:         const concertPromises = concertRefs.map(concertRef => {
   + APRÃˆS:         const concertPromises = concertRefs.map(concertRef => {

ğŸ“ src//hooks/contacts/useSimpleContactDetails.js:132
   - AVANT:         const concertResults = await Promise.all(concertPromises);
   + APRÃˆS:         const concertResults = await Promise.all(concertPromises);

ğŸ“ src//hooks/contacts/useSimpleContactDetails.js:140
   - AVANT:         const concertsConstraints = [where('contactIds', 'array-contains', id)];
   + APRÃˆS:         const concertsConstraints = [where('contactIds', 'array-contains', id)];

ğŸ“ src//hooks/contacts/useSimpleContactDetails.js:144
   - AVANT:         let concertsQuery = query(
   + APRÃˆS:         let concertsQuery = query(

ğŸ“ src//hooks/contacts/useSimpleContactDetails.js:149
   - AVANT:         let concertsLoaded = querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
   + APRÃˆS:         let concertsLoaded = querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));

ğŸ“ src//hooks/contacts/useSimpleContactDetails.js:153
   - AVANT:           const concertsConstraints2 = [where('contactId', '==', id)];
   + APRÃˆS:           const concertsConstraints2 = [where('contactId', '==', id)];


ğŸ¯ PHASE 5: Textes UI
====================
ğŸ“ src//components/lieux/LieuxList.js:107
   - AVANT:         label: 'Avec concerts',
   + APRÃˆS:         label: 'Avec dates',

ğŸ“ src//pages/DebugToolsPage.js:87
   - AVANT:         <Tab eventKey="migration-concert-date" title="ğŸ”„ Migration Concertsâ†’Dates">
   + APRÃˆS:         <Tab eventKey="migration-concert-date" title="ğŸ”„ Migration Datesâ†’Dates">


ğŸ“Š RÃ‰SUMÃ‰
=========
Total de modifications identifiÃ©es: 155

ğŸ“ Fichiers impactÃ©s:
src//components/artistes/desktop/ArtisteView.js
src//components/artistes/mobile/ArtisteView.js
src//components/contacts/EchangeForm.js
src//components/contacts/mobile/ContactView.js
src//components/contacts/sections/ContactDatesSection.js
src//components/debug/BidirectionalRelationsFixer.js
src//components/debug/ContactCreationTester.js
src//components/debug/ContactMigrationTool.js
src//components/debug/ContactsMigrationFinal.js
src//components/debug/DataStructureFixer.js
src//components/debug/EntityCreationTester.js
src//components/debug/EntityRelationsDebugger.js
src//components/debug/FestitestContactFinder.js
src//components/debug/ListDebugger.js
src//components/debug/MigrationConcertToDate.js
src//components/debug/OrganizationIdDebug.js
src//components/debug/OrganizationIdFixer.js
src//components/debug/SophieMadetMigration.js
src//components/debug/TestWorkflowButton.js
src//components/debug/TestWorkflowButton2.js
src//components/lieux/LieuxList.js
src//components/lieux/desktop/LieuView.js
src//components/lieux/mobile/LieuView.js
src//components/structures/desktop/StructureForm.js
src//components/structures/desktop/StructureView.js
src//hooks/artistes/useSearchAndFilter.js
src//hooks/common/useEntitySearch.js
src//hooks/common/useFormSubmission.js
src//hooks/contacts/useSimpleContactDetails.js
src//hooks/generics/actions/useGenericAction.js
src//hooks/generics/status/useGenericEntityStatus.js
src//hooks/lieux/useLieuxQuery.js
src//pages/DebugToolsPage.js

âš ï¸  AVERTISSEMENTS:
- Certaines modifications nÃ©cessitent une vÃ©rification manuelle
- Les types 'Concert' ne doivent PAS Ãªtre modifiÃ©s
- Les textes UI doivent Ãªtre vÃ©rifiÃ©s pour le contexte
